[settings]
build_type=Release
compiler=clang
compiler.cppstd=gnu23
compiler.libcxx=libstdc++11
compiler.version=20
os=Linux

[tool_requires]
tttapa-toolchains-clang/1.1.0
mold/2.32.1
cmake/3.31.6
ninja/1.12.1

[replace_requires]
eigen/*: eigen/tttapa.20250504

[buildenv]
MKLROOT={{ os.getenv("MKLROOT") or os.path.join(os.getenv("HOME"), "intel/oneapi/mkl/latest")}}
VTUNE_PROFILER_DIR={{ os.getenv("VTUNE_PROFILER_DIR") or os.path.join(os.getenv("HOME"), "intel/oneapi/vtune/latest")}}

[conf]
tools.build:compiler_executables*={"c": "clang-20", "cpp": "clang++-20", "fortran": "flang-20"}
tools.cmake.cmaketoolchain:generator=Ninja Multi-Config
tools.build:exelinkflags+=["-flto=auto", "-static-libstdc++", "-static-libgcc"]
tools.build:sharedlinkflags+=["-flto=auto", "-static-libstdc++", "-static-libgcc"]
tools.build:exelinkflags+=["-fuse-ld=mold"]
tools.build:sharedlinkflags+=["-fuse-ld=mold"]
